(self.webpackChunkproject=self.webpackChunkproject||[]).push([[934],{74934:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>L});var r,l,a,o,i,c,u,s,m,d=n(34699),h=n(32465),f=n(67294),p=n(56999),g=n(13313),v=n(82193),E=n(29734),b=n(92784),y=n(87329),Z=n(61800),x=n(26674),w=n(28834),C=n(41120),S=n(64436),N=n(30585),_=n(87343),W=n(42283),k=n(24097),T=n(19501),A=n(93379),V=n.n(A),P=n(14802);function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}V()(P.Z,{insert:"head",singleton:!1}),P.Z.locals;var F=(0,C.Z)((function(e){return{formControl:{marginBottom:"20px","& > label > span":{color:"red"}},textArial:{padding:"6px 20px",fontSize:18,fontWeight:500},selectStyles:{marginBottom:"20px","& > label > span":{color:"red"}},boxRow:{"& > *":{width:"calc(100% / 3 - 20px)"}},helperTextStyles:{color:"red",position:"absolute",bottom:"-18px"},buttonStyles:{}}})),I=k.ZP.div(r||(r=(0,h.Z)(["\n  background-color: #f7f7f7;\n  width: 100vw;\n  height: auto;\n  margin-top: 100px;\n  font-family: 'Nunito', Arial, sans-serif;\n"]))),Q=k.ZP.div(l||(l=(0,h.Z)(["\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 1170px;\n  overflow: hidden;\n  position: relative;\n  padding: 15px;\n"]))),R=k.ZP.h1(a||(a=(0,h.Z)(["\n  font-weight: 700;\n  color: #484848;\n  font-size: 30px;\n  margin: 28px 0;\n"]))),j=k.ZP.h5(o||(o=(0,h.Z)(["\n  font-weight: 700;\n  color: #484848;\n  font-size: 20px;\n  margin-bottom: 20px;\n"]))),D=k.ZP.div(i||(i=(0,h.Z)(["\n  width: 100%;\n"]))),U=k.ZP.div(c||(c=(0,h.Z)(["\n  background-color: #fff;\n  padding: 30px;\n  margin-bottom: 30px;\n  border-radius: 6px;\n  border: 1px solid #ebebeb;\n"]))),$=k.ZP.div(u||(u=(0,h.Z)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n"]))),G=k.ZP.label(s||(s=(0,h.Z)(["\n  color: #222;\n  font-weight: '600';\n"]))),B=k.ZP.div(m||(m=(0,h.Z)(["\n  width: 100%;\n  border: 1px solid #ebebeb;\n  margin: 25px 0;\n"])));const L=function(e){var t=F(),n=(0,x.a)().userId,r=function(){var e=(0,f.useState)(null),t=(0,d.Z)(e,2),n=t[0],r=t[1],l=(0,f.useState)(null),a=(0,d.Z)(l,2),o=a[0],i=a[1],c=(0,f.useState)(null),u=(0,d.Z)(c,2),s=u[0],m=u[1],h=(0,f.useState)([]),p=(0,d.Z)(h,2),g=p[0],v=p[1],E=(0,f.useState)([]),y=(0,d.Z)(E,2),Z=y[0],x=y[1],w=(0,f.useState)([]),C=(0,d.Z)(w,2),S=C[0],N=C[1];return(0,f.useEffect)((function(){b.W.get("/province/getAll").then((function(e){null!==e.data.data?v(e.data.data.map((function(e){return{value:e.id,label:null==e?void 0:e.province_name}}))):v([])})).catch((function(e){}))}),[]),(0,f.useEffect)((function(){i(null),m(null),null!==n?b.W.get("/district/getById/".concat(n.value)).then((function(e){null!==e.data.data?x(e.data.data.map((function(e){return{value:e.id,label:e.prefix+" "+e.name}}))):x([])})).catch((function(e){})):(x([]),N([]))}),[n]),(0,f.useEffect)((function(){m(null),null!==o?b.W.get("/ward/getByCityAndDistrict/".concat(n.value,"/").concat(o.value)).then((function(e){null!==e.data.data?N(e.data.data.map((function(e){return{value:e.id,label:e.prefix+" "+e.name}}))):N([])})):N([])}),[o]),{listProvince:g,listDistrict:Z,listWard:S,selectedProvince:n,selectedDistrict:o,selectedWard:s,setSelectedProvince:r,setSelectedDistrict:i,setSelectedWard:m}}(),l=r.listProvince,a=r.listDistrict,o=r.listWard,i=r.selectedProvince,c=r.selectedDistrict,u=r.selectedWard,s=r.setSelectedProvince,m=r.setSelectedDistrict,h=r.setSelectedWard,C=function(){var e=(0,f.useState)([]),t=(0,d.Z)(e,2),n=t[0],r=t[1];return(0,f.useEffect)((function(){b.W.get("/ultility/getAll").then((function(e){null!==e.data.data?r(e.data.data.map((function(e){return{value:e.id,label:e.name}}))):r([])}))}),[]),{listUltility:n}}().listUltility,k=function(){var e=(0,f.useState)([]),t=(0,d.Z)(e,2),n=t[0],r=t[1],l=(0,f.useState)([]),a=(0,d.Z)(l,2),o=a[0],i=a[1];(0,f.useEffect)((function(){if(o.length>0){var e=(0,y.Z)(n);for(var t in o)isNaN(t)||e.push({id:(0,Z.V)(),toUpload:o[t],previewSrc:URL.createObjectURL(o[t])});r(e)}}),[o]);var c=(0,f.useCallback)((function(e){var t=(0,y.Z)(n);r(t.filter((function(t){return t.id!=e})))}),[n]);return{listImages:n,setAddListImages:i,deleteAnImage:c}}(),A=k.listImages,V=k.setAddListImages,P=(k.deleteAnImage,(0,f.useState)([])),L=(0,d.Z)(P,2),O=L[0],M=L[1];console.log("list",A),(0,f.useEffect)((function(){C&&M(C.map((function(e){return{label:e.label,value:e.value,id:e.value,isChecked:!1}})))}),[C]);var z=T.Ry().shape({name:T.Z_().required("Vui lòng nhập tên phòng"),capacity:T.Z_().required("Vui lòng nhập sức chứa").matches(/^[0-9]+$/,"Sức chứa không hợp lệ"),acreage:T.Z_().required("Vui lòng nhập diện tích phòng").matches(/^[0-9]+$/,"Sức chứa không hợp lệ"),house_number:T.Z_().required("Vui lòng số nhà").matches(/^[0-9]+$/,"Số nhà không hợp lệ"),alley:T.Z_().required("Vui lòng nhập ngõ ngách").matches(/^[0-9|/]+$/,"Ngõ ngách không hợp lệ"),street:T.Z_().required("Vui lòng nhập tên đường"),ward:T.Z_().required("Vui lòng chọn phường").nullable("Vui lòng chọn phường"),district:T.Z_().required("Vui lòng chọn quận").nullable("Vui lòng chọn quận"),city:T.Z_().required("Vui lòng chọn thành phố").nullable("Vui lòng chọn thành phố"),price:T.Z_().required("Vui lòng nhập giá phòng").matches(/^[0-9]+$/,"Giá phòng không hợp lệ"),utility_bill:T.Z_().required("Vui lòng nhập giá điện").matches(/^[0-9]+$/,"Giá điện không hợp lệ"),water_bill:T.Z_().required("Vui lòng nhập giá nước").matches(/^[0-9]+$/,"Giá nước không hợp lệ")}),X=(0,W.cI)({mode:"onSubmit",defaultValues:{name:"",capacity:"",acreage:"",overview:"",house_number:"",alley:"",street:"",ward:null,district:null,city:null,rent_or_sale:0,price:"",utility_bill:"",water_bill:""},resolver:(0,w.X)(z)}),J=X.control,Y=X.handleSubmit,H=X.formState;return console.log(H.errors),f.createElement(I,null,f.createElement(Q,null,f.createElement(R,null,"Add Room"),f.createElement(D,null,f.createElement("form",{onSubmit:Y((function(e){console.log("submit");var t=new FormData;for(var r in t.append("belongTo",n),e)"overview"==r?t.append(r,e[r].replace(/\n/g,"<br />")):"image"!==r&&t.append(r,e[r]);1===A.length?t.append("singleImage",A[0].toUpload):A.length>1&&A.forEach((function(e,n){t.append("multipleRoomImage",e.toUpload)}));var l,a=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw a}}}}(t.values());try{for(a.s();!(l=a.n()).done;){var o=l.value;console.log(o)}}catch(e){a.e(e)}finally{a.f()}O.forEach((function(e,n){console.log(e),e.isChecked&&t.append("ultilities",JSON.stringify({id:e.value}))})),b.W.post("/room/uploadARoom",t).then((function(e){console.log("ok")})).catch((function(e){console.log(e)}))}))},f.createElement(U,null,f.createElement(j,null,"Thông tin cơ bản"),f.createElement(W.Qr,{name:"name",control:J,render:function(e){var n,r=e.field,l=r.onChange,a=r.value;return f.createElement(S.Z,{className:t.formControl,fullWidth:!0},f.createElement(G,{htmlFor:"form-add-name"},"Tên phòng trọ",f.createElement("span",null," *")),f.createElement(E.i,{id:"form-add-name",fullWidth:!0,type:"text",error:!!H.errors.name,value:a||"",inputChange:function(e){l(e)}}),f.createElement(N.Z,{className:t.helperTextStyles},null===(n=H.errors.name)||void 0===n?void 0:n.message))}}),f.createElement(W.Qr,{name:"capacity",control:J,render:function(e){var n,r=e.field,l=r.onChange,a=r.value;return f.createElement(S.Z,{className:t.formControl,fullWidth:!0},f.createElement(G,{htmlFor:"form-add-capacity"},"Sức chứa(người)",f.createElement("span",null," *")),f.createElement(E.i,{id:"form-add-capacity",fullWidth:!0,type:"text",error:!!H.errors.capacity,value:a||"",inputChange:function(e){l(e)}}),f.createElement(N.Z,{className:t.helperTextStyles},null===(n=H.errors.capacity)||void 0===n?void 0:n.message))}}),f.createElement(W.Qr,{name:"acreage",control:J,render:function(e){var n,r=e.field,l=r.onChange,a=r.value;return f.createElement(S.Z,{className:t.formControl,fullWidth:!0},f.createElement(G,{htmlFor:"form-add-acreage"},"Diện tích(㎡)",f.createElement("span",null," *")),f.createElement(E.i,{id:"form-add-acreage",fullWidth:!0,type:"text",error:!!H.errors.acreage,value:a||"",inputChange:function(e){l(e)}}),f.createElement(N.Z,{className:t.helperTextStyles},null===(n=H.errors.acreage)||void 0===n?void 0:n.message))}}),f.createElement(W.Qr,{name:"image",control:J,render:function(e){var n=e.field,r=n.onChange;return n.value,f.createElement(S.Z,{className:t.formControl,fullWidth:!0},f.createElement(G,{htmlFor:"form-add-image"},"Ảnh",f.createElement("span",null," *")),f.createElement("input",{id:"dd",type:"file",accept:"image/png, image/jpeg image/jpg",onChange:function(e){V(e.target.files),r(e)},multiple:!0,name:"upload_file"}))}}),f.createElement("section",null,A.map((function(e){return f.createElement("img",{src:e.previewSrc,style:{height:100,width:100},key:e.id})}))),f.createElement(W.Qr,{name:"overview",control:J,render:function(e){var n=e.field,r=n.onChange,l=n.value;return f.createElement(S.Z,{className:t.formControl,fullWidth:!0},f.createElement(G,{htmlFor:"form-add-overview"},"Overview"),f.createElement(_.Z,{id:"form-add-overview",rowsMin:8,rowsMax:10,value:l||"",onChange:r,className:t.textArial}))}})),f.createElement(U,null,f.createElement(j,null,"Địa chỉ"),f.createElement($,{className:t.boxRow},f.createElement(W.Qr,{name:"house_number",control:J,render:function(e){var n,r=e.field,l=r.onChange,a=r.value;return f.createElement(S.Z,{className:t.formControl},f.createElement(G,{htmlFor:"form-add-house-number"},"Số nhà",f.createElement("span",null," *")),f.createElement(E.i,{id:"form-add-house-number",type:"text",error:!!H.errors.house_number,fullWidth:!0,value:a||"",inputChange:function(e){l(e)}}),f.createElement(N.Z,{className:t.helperTextStyles},null===(n=H.errors.house_number)||void 0===n?void 0:n.message))}}),f.createElement(W.Qr,{name:"alley",control:J,render:function(e){var n,r=e.field,l=r.onChange,a=r.value;return f.createElement(S.Z,{className:t.formControl},f.createElement(G,{htmlFor:"form-add-alley"},"Ngõ ngách",f.createElement("span",null," *")),f.createElement(E.i,{id:"form-add-alley",type:"text",error:!!H.errors.alley,fullWidth:!0,value:a||"",inputChange:function(e){l(e)}}),f.createElement(N.Z,{className:t.helperTextStyles},null===(n=H.errors.alley)||void 0===n?void 0:n.message))}}),f.createElement(W.Qr,{name:"street",control:J,render:function(e){var n,r=e.field,l=r.onChange,a=r.value;return f.createElement(S.Z,{className:t.formControl},f.createElement(G,{htmlFor:"form-add-street"},"Đường",f.createElement("span",null," *")),f.createElement(E.i,{id:"form-add-street",type:"text",error:!!H.errors.street,fullWidth:!0,value:a||"",inputChange:function(e){l(e)}}),f.createElement(N.Z,{className:t.helperTextStyles},null===(n=H.errors.street)||void 0===n?void 0:n.message))}}),f.createElement(W.Qr,{name:"ward",control:J,render:function(e){var n,r=e.field,l=r.onChange,a=(r.value,r.name);return f.createElement(S.Z,{className:t.formControl},f.createElement(G,{htmlFor:"form-add-ward"},"Phường",f.createElement("span",null," *")),f.createElement(v.u,{name:a,fullWidth:!0,value:u,options:o,placeholder:"Chọn phường",width:"100%",onChange:function(e){h(e),l(e?e.value:null)}}),f.createElement(N.Z,{className:t.helperTextStyles},null===(n=H.errors.ward)||void 0===n?void 0:n.message))}}),f.createElement(W.Qr,{name:"district",control:J,render:function(e){var n,r=e.field,l=r.onChange,o=(r.value,r.name);return f.createElement(S.Z,{className:t.selectStyles},f.createElement(G,null,"Quận",f.createElement("span",null," *")),f.createElement(v.u,{name:o,value:c,options:a,fullWidth:!0,placeholder:"Chọn quận",width:"100%",onChange:function(e){m(e),l(e?e.value:null)}}),f.createElement(N.Z,{className:t.helperTextStyles},null===(n=H.errors.district)||void 0===n?void 0:n.message))}}),f.createElement(W.Qr,{name:"city",control:J,render:function(e){var n,r=e.field,a=r.onChange,o=(r.value,r.name);return f.createElement(S.Z,{className:t.formControl},f.createElement(G,{htmlFor:"form-add-acreage"},"Thành phố",f.createElement("span",null," *")),f.createElement(v.u,{name:o,options:l,fullWidth:!0,placeholder:"Chọn thành phố",width:"100%",value:i,onChange:function(e){s(e),a(e?e.value:null)}}),f.createElement(N.Z,{className:t.helperTextStyles},null===(n=H.errors.city)||void 0===n?void 0:n.message))}}))),f.createElement(U,null,f.createElement(j,null,"Giá"),f.createElement($,{className:t.boxRow},f.createElement(W.Qr,{name:"price",control:J,render:function(e){var n,r=e.field,l=r.onChange,a=r.value;return f.createElement(S.Z,{className:t.formControl},f.createElement(G,{htmlFor:"form-add-house-number"},"Giá thuê nhà(theo tháng)",f.createElement("span",null," *")),f.createElement(E.i,{id:"form-add-house-number",type:"text",error:!!H.errors.price,fullWidth:!0,value:a||"",inputChange:function(e){l(e)}}),f.createElement(N.Z,{className:t.helperTextStyles},null===(n=H.errors.price)||void 0===n?void 0:n.message))}}),f.createElement(W.Qr,{name:"utility_bill",control:J,render:function(e){var n,r=e.field,l=r.onChange,a=r.value;return f.createElement(S.Z,{className:t.formControl},f.createElement(G,{htmlFor:"price-electric"},"Giá điện(kWh)",f.createElement("span",null," *")),f.createElement(E.i,{id:"price-electric",type:"text",error:!!H.errors.utility_bill,fullWidth:!0,value:a||"",inputChange:function(e){l(e)}}),f.createElement(N.Z,{className:t.helperTextStyles},null===(n=H.errors.utility_bill)||void 0===n?void 0:n.message))}}),f.createElement(W.Qr,{name:"water_bill",control:J,render:function(e){var n,r=e.field,l=r.onChange,a=r.value;return f.createElement(S.Z,{className:t.formControl},f.createElement(G,{htmlFor:"price-water"},"Giá nước sinh hoạt",f.createElement("span",null," *")),f.createElement(E.i,{id:"price-water",type:"text",error:!!H.errors.water_bill,fullWidth:!0,value:a||"",inputChange:function(e){l(e)}}),f.createElement(N.Z,{className:t.helperTextStyles},null===(n=H.errors.water_bill)||void 0===n?void 0:n.message))}}))),f.createElement(U,null,f.createElement(j,null,"Tiện ích"),f.createElement($,{className:t.boxRow},O.map((function(e){return f.createElement(g.Y,{label:e.label,data:e,key:e.id,checkBoxState:O,setCheckBoxState:M})})))),f.createElement(B,null),f.createElement(p.k,{buttonType:"main",type:"submit",className:t.buttonStyles},"Lưu")))))}},14802:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(23645),l=n.n(r)()((function(e){return e[1]}));l.push([e.id,".MuiInput-formControl {\r\n  margin: 0 !important;\r\n}\r\ninput[type='file']::-webkit-file-upload-button {\r\n  display: none;\r\n}\r\ninput[type='file']::before {\r\n  content: 'Upload File';\r\n  display: inline-block;\r\n  background: #f7f7f7;\r\n  outline: none;\r\n  white-space: nowrap;\r\n  cursor: pointer;\r\n  padding: 20px 35px;\r\n  border: solid 1px #ebebeb;\r\n  font-weight: 700;\r\n  border-radius: 4px;\r\n}\r\n",""]);const a=l}}]);